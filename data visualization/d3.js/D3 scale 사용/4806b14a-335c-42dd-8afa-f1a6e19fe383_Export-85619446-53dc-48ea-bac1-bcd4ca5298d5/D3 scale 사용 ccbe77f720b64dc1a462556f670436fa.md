# D3 scale 사용

D3 Scales(스케일)은 D3.js 라이브러리에서 데이터를 시각적 속성(예: 위치, 크기, 색상 등)으로 매핑할 때 사용되는 함수입니다. 주어진 데이터의 도메인(입력 범위)과 원하는 출력 범위(레인지) 사이의 변환을 담당하여 데이터를 시각적으로 나타내기 쉽도록 도와줍니다.

다음은 D3.js에서 주로 사용되는 스케일의 종류입니다:

1. **Linear Scale(선형 스케일)**:
    - **`d3.scaleLinear()`**: 연속적인 데이터를 연속적인 공간에 매핑할 때 사용됩니다.
    - 예를 들어, 0부터 100까지의 데이터를 그래프의 너비에 매핑하여 출력하거나, 데이터 값을 원의 반지름에 매핑하여 표현하는 등에 활용될 수 있습니다.
2. **Ordinal Scale(서열 스케일)**:
    - **`d3.scaleOrdinal()`**: 이산적인 데이터(카테고리, 이산적인 값)를 이산적인 공간에 매핑할 때 사용됩니다.
    - 예를 들어, 요일이나 각종 범주형 데이터를 색상, 높이 등과 같은 이산적인 시각적 요소에 매핑하여 표현하는 데 사용될 수 있습니다.
3. **Time Scale(시간 스케일)**:
    - **`d3.scaleTime()`**: 시간 데이터를 시간 축에 매핑할 때 사용됩니다.
    - 시간 간격을 정의하고, 이를 그래프의 축 또는 다른 시각적 요소의 크기에 매핑하여 시계열 데이터를 표현하는 데 사용됩니다.
4. **Log Scale(로그 스케일)**:
    - **`d3.scaleLog()`**: 데이터를 로그 공간에 매핑하여 작은 값과 큰 값의 차이를 강조할 때 사용됩니다.
    - 주로 데이터의 광범위한 범위를 가진 경우에 사용되며, 데이터의 로그값을 크기나 위치 등과 같은 시각적 속성에 매핑할 수 있습니다.
    

스케일은 **`.domain()`**을 통해 입력 범위를 설정하고, **`.range()`**를 통해 출력 범위를 설정합니다. 입력 범위에 있는 값들은 출력 범위에 있는 값들로 변환됩니다. 스케일링을 통해 데이터를 시각적으로 더 의미있게 표현할 수 있고, 데이터 값의 변화를 보다 쉽게 파악할 수 있도록 도와줍니다.

```tsx
xScale = d3.scaleLinear()
  .domain([0, d3.max(data)])
  .range([0, width])
```

- **`.domain([0, d3.max(data)])`**: 입력 데이터의 도메인을 설정합니다. 여기서 **`[0, d3.max(data)]`**는 데이터 배열에서 0부터 최댓값까지를 입력 도메인으로 설정하는 것을 의미합니다. 이는 입력 데이터의 범위를 지정하여 해당 값들을 스케일링할 수 있도록 도와줍니다.
- **`.range([0, width])`**: 출력 레인지를 설정합니다. 이는 입력된 데이터를 출력할 특정 범위로 변환해줍니다. 여기서 **`[0, width]`**는 0부터 **`width`**까지의 범위로 출력값을 설정하는 것입니다. 즉, 스케일링된 결과를 0부터 특정 너비(**`width`**)까지의 범위로 매핑합니다.

```tsx
{
  const svg = d3.create("svg")
    .attr("width", width)
    .attr("height", height);

  svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
      .attr("x", 10)
      .attr("y", (d, i)=> i * 10 + 10)
      .attr("width", d => xScale(d))
      .attr("height", 8)
      .attr("fill", "steelblue")

  return svg.node();
}
```

- **`x`**: 사각형의 왼쪽 상단 모서리의 x 좌표를 나타냅니다. 이 값은 **`10`**으로 설정되어 있어서 x 좌표 값이 10으로 고정되어 있습니다.
- **`y`**: 사각형의 왼쪽 상단 모서리의 y 좌표를 나타냅니다. **`(d, i) => i * 10 + 10`**으로 설정되어 있어, 각각의 사각형이 수직으로 10픽셀 간격으로 배치됩니다.

- **`width`**: 사각형의 가로 길이를 나타냅니다. **`d => xScale(d)`**로 설정되어 있어, 데이터 값에 따라 스케일링된 너비를 갖게 됩니다. 이 값은 **`xScale`**에서 설정한 스케일에 따라 변화합니다.
- **`height`**: 사각형의 세로 길이를 나타냅니다. **`8`**로 설정되어 있어, 모든 사각형의 세로 길이가 8픽셀로 일정하게 유지됩니다.

![FigJam Basics.jpg](D3%20scale%20%E1%84%89%E1%85%A1%E1%84%8B%E1%85%AD%E1%86%BC%20ccbe77f720b64dc1a462556f670436fa/FigJam_Basics.jpg)