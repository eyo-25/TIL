# Data Binding in D3.js

[https://observablehq.com/d/d3732dc877423e70](https://observablehq.com/d/d3732dc877423e70)

D3.js에서의 데이터 바인딩은 데이터와 DOM 요소를 연결하고, 해당 데이터를 기반으로 동적으로 DOM을 업데이트하는 핵심적인 개념입니다.

D3.js는 데이터와 DOM 요소를 바인딩하는데 사용되는 메서드를 제공합니다. 데이터 바인딩은 다음과 같은 단계로 이루어집니다:

1. **데이터 선택하기**:
    - **`selectAll()`** 메서드를 사용하여 특정 요소를 선택합니다. 이때, 미리 존재하는 DOM 요소 중에서 데이터에 따라 업데이트될 요소를 선택합니다.
2. **데이터 바인딩하기**:
    - **`data()`** 메서드를 사용하여 선택한 요소에 데이터를 바인딩합니다. 이는 데이터 배열이나 객체를 선택한 요소와 일대일로 매핑하여 연결하는 것을 의미합니다.
3. **엔터(Enter) 선택하기**:
    - **`enter()`** 메서드를 사용하여 바인딩된 데이터 중에서 DOM에 존재하지 않는 데이터에 대한 엔터(Enter) 선택을 생성합니다.
    - 이것은 데이터 배열의 요소 수와 일치하지 않는 DOM 요소들을 대상으로 합니다. (신규로 추가되어야 할 요소들을 선택)
4. **새로운 요소 추가하기**:
    - **`append()`** 메서드를 사용하여 엔터(Enter) 선택에 새로운 DOM 요소를 추가합니다.
    - 데이터 배열과 매핑되지 않는 새로운 요소들이 이 단계에서 생성됩니다.
5. **기존 요소 업데이트하기**:
    - 바인딩된 데이터와 일치하는 기존 DOM 요소를 선택하여 업데이트합니다.
    - 선택된 요소의 속성을 변경하거나 업데이트하여 데이터에 따라 시각적으로 나타내는 역할을 합니다. (예: 위치, 크기, 색상 등)
6. **나머지 요소 제어하기 (선택적)**:
    - **`exit()`** 메서드를 사용하여 데이터 배열과 일치하지 않는 나머지 DOM 요소에 대한 선택을 만듭니다.
    - 해당 요소들을 **`.remove()`** 메서드를 통해 삭제하여 DOM과 데이터의 일관성을 유지합니다.

```tsx
// 예시 데이터셋
data = Array(50) [5, 59, 73, 27, 90, 86, 67, 21, 23, 12, 73, 88, 38, 77, 6, 32, 90, 47, 70, 9, …]

chart = {
	// SVG 요소 생성
  const svg = d3.create("svg")
      .attr("width", width)
      .attr("height", height);

	// 데이터 바인딩 및 원 생성
  svg.selectAll("circle").data(data).enter()
    .append("circle")
    .attr("cx", (d, i)=> i * 20 + 10)
    .attr("cy", 50)
    .attr("r", d => Math.sqrt(d))
    .style("fill", "steelblue")
  
  return svg.node();
}
```

이렇게 데이터 바인딩을 통해 D3.js를 사용하면 데이터와 시각적 요소(DOM) 간의 연결을 효과적으로 관리하고, 데이터의 변화에 따라 동적으로 시각화를 업데이트할 수 있습니다.