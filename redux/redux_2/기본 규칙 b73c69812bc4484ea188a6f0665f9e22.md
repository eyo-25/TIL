# ê¸°ë³¸ ê·œì¹™

## **ğŸ’¡**dispatch ì‚¬ìš©ëª©ì 

dispatchëŠ” reducerì™€ ì†Œí†µì‹œ typeê³¼ í•¨ê»˜ ë°ì´í„°ë¥¼ actionì— ë‹´ì•„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

```jsx
  store.dispatch({ type: ADD_TODO, text: toDo, date: Date.now() });
```

## **ğŸš« stateë¥¼ mutate(ë³€í˜•)í•˜ì§€ ë§ê²ƒ**

ì˜ˆë¥¼ë“¤ì–´ `x=[1,2,3]` ë¼ëŠ” ë°°ì—´ì— `x.push(4)` ë¥¼ í•œë‹¤ë©´ `x`ëŠ” ì—¬ì „íˆ ë™ì¼í•œ â€œë©”ëª¨ë¦¬ ì£¼ì†Œâ€ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— Javascriptê°€ ê°ì²´ê°€ ë‹¤ë¥¸ì§€ ì•Œê¸° ì–´ë µìŠµë‹ˆë‹¤.

**ğŸ”½ ì•„ë˜ì˜ o3ë¥¼ ë³´ë©´ ê°™ì€ ë©”ëª¨ë¦¬ì£¼ì†Œì—ì„œ ê°’ë§Œ ë³€ê²½ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

![sdsd11.PNG](%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%80%E1%85%B2%E1%84%8E%E1%85%B5%E1%86%A8%20b73c69812bc4484ea188a6f0665f9e22/sdsd11.png)

**â–¶ï¸** ë”°ë¼ì„œ ìƒˆ ë°°ì—´ì„ ë§Œë“¤ë•Œ **mutateí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë¦¬í„´**í•´ì•¼ í•©ë‹ˆë‹¤**.**

**ğŸ”½** ì´ë¥¼ ë¦¬ë“€ì„œì— ì ìš©í•´ë³´ë©´ ì•„ë˜ì—ì„œ returnì— `prevstate.push(action.text)` í•˜ëŠ”ê²ƒì´ ì•„ë‹ˆë¼

```jsx

const reducer = (prevstate, action) => {
  console.log(action);
  switch (action.type) {
    case ADD_TODO:
      return prevstate.push(action.text); // **stateë¥¼ mutate(ë³€í˜•)í•˜ì§€ ë§ì•„ì•¼í•œë‹¤.**
    default:
      return prevstate;
  }
};
```

**ğŸ”½** ì•„ë˜ì²˜ëŸ¼ ê¸°ì¡´ì˜ **stateë¥¼ ê°€ì ¸ì˜¤ê³  ìƒˆë¡­ê²Œ ì¶”ê°€í•˜ëŠ”ê²ƒì„ ë”í•˜ì—¬ ìƒˆë¡œìš´ stateë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.**

```jsx
const reducer = (prevstate, action) => {
  switch (action.type) {
    case ADD_TODO:
      return [{ text: action.text, id: action.date }, ...prevstate];
    case DELETE_TODO:
      return [];
    default:
      return prevstate;
  }
};
```

![sdsdsdsd.PNG](%E1%84%80%E1%85%B5%E1%84%87%E1%85%A9%E1%86%AB%20%E1%84%80%E1%85%B2%E1%84%8E%E1%85%B5%E1%86%A8%20b73c69812bc4484ea188a6f0665f9e22/sdsdsdsd.png)

**â¬†ï¸** ìƒˆë¡­ê²Œ ì¶”ê°€ë˜ëŠ”ê²ƒë“¤ì´ ì•ì— ì˜¬ ìˆ˜ ìˆë„ë¡ ë°°ì—´ì— ìƒˆë¡œìš´ ê°ì²´ë¥¼ ë„£ê³  spreadë¡œ ë‚˜ë¨¸ì§€ë¥¼ ì…ë ¥

`[{ text: action.text, id: action.date }, ...prevstate];`

## **ğŸ—‘ State ë°°ì—´ì„ Deleteí• ë•ŒëŠ” filter()ë¥¼ ì‚¬ìš©**

**1ï¸âƒ£** ë¨¼ì € storeì˜ stateëŠ” ë°°ì—´ì•ˆì— ê°ì²´ê°€ ì´ë£¨ì–´ì§„ ê²½ìš°ì—ì„œ ì›í•˜ëŠ” ê°ì²´ë¥¼ ì‚­ì œí•˜ëŠ” ë²•ì´ë‹¤.

( initialState = `[{text:"ì•ˆë…•",id:1},{text:"ì˜ìˆì–´",id:1}]` )

```jsx
const store = legacy_createStore(reducer, [{text:"ì•ˆë…•",id:1},{text:"ì˜ìˆì–´",id:1}]);
```

**2ï¸âƒ£** ì‚­ì œí•˜ê³  ì‹¶ì€ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ `dispatchDeleteToDo` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

```jsx
btn.addEventListener("click", dispatchDeleteToDo);
```

**3ï¸âƒ£** dispatchí•¨ìˆ˜ëŠ” í´ë¦­í•œ btnì˜ ë¶€ëª¨ë…¸ë“œì˜ idë¥¼ ìˆ«ìë¡œ ë³€í™˜í•´ `deleteToDo()`ë¡œ idë¥¼ ë³´ë‚¸ë‹¤.

```jsx
const dispatchDeleteToDo = (e) => {
  const id = parseInt(e.target.parentNode.id);
  store.dispatch(deleteToDo(id));
};
```

**4ï¸âƒ£** `deleteToDo`(action)ì—ì„œëŠ” idë¥¼ ë°›ì•„ì„œ typeê³¼ idë¥¼ ê°€ì§„ ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤.

```jsx
// action
const deleteToDo = (id) => {
  return { type: DELETE_TODO, id: id };
};
```

**5ï¸âƒ£** reducerëŠ” ìœ„ì—ì„œ ë¦¬í„´í•œ typeê³¼ idë¥¼ ê°€ì§„ ê°ì²´(action)ë¥¼ ë°›ì•„ `dispatch` (reducerì—ê²Œ ì „ì†¡)

**6ï¸âƒ£ reducerëŠ” storeì—ì„œ** prevstateë¥¼ êº¼ë‚´ì™€ì„œ filterë¥¼ í†µí•´ ë°°ì—´ì„ ìˆœíšŒí•˜ë©°

`toDo.id !== action.id`ê°€ trueì¸ ëª¨ë“ ìš”ì†Œë¥¼ ëª¨ì•„ **ìƒˆë¡œìš´ Arrayë¥¼ ìƒì„±**í•˜ì—¬ ë¦¬í„´í•œë‹¤.

```jsx
//reducer
const reducer = (prevstate, action) => {
  switch (action.type) {
    case DELETE_TODO:
      return prevstate.filter((toDo) => {
        return toDo.id !== action.id;
      });
    default:
      return prevstate;
  }
};
```

**âœ…** stateë¥¼ mutate(ë³€í˜•)í•˜ì§€ ë§ì•„ì•¼ í•˜ê¸°ë•Œë¬¸ì— filterë¡œ ìƒˆë¡œìš´ Arrayë¥¼ ìƒì„±