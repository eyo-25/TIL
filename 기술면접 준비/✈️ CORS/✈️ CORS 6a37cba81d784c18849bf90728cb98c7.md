# ✈️ CORS

## CORS

---

브라우저에서는 보안을 위해 SOP (동일 출처 정책, Same-Origin Policy)기능이 있습니다. 이것은 웹 페이지가 동일한 출처에서 로드된 리소스에만 접근을 허용하도록 하는 정책입니다.

하지만 현대에는 다른 도메인의 API나 자원을 활용하는 경우가 많은데 이를 위해 CORS (교차 출처 리소스 공유, Cross-Origin Resource Sharing)를 통해 다른 서버로 부터 리소스를 요청하고 응답받을 수 있습니다.

## CORS 에러는 서버에서 보내는 것인가요?

---

CORS 에러를 띄우는 것은 브라우저가 합니다. 브라우저는 http 관련 통신이 일어날 때 cors 검증을 해야하는 지 아닌 지 판단합니다.

만약 필요한 경우 서버에 CORS 검증을 요청합니다. 이때 사전에 검증이 필요한 경우 OPTION메서드를 통해 Preflight request을 미리 보내 권한을 확인하고 해당요청을 보냅니다.

출처란 프로토콜, 호스트, 포트로 구성되며, 두 URL이 하나의 출처에 속한다면 동일 출처로 간주됩니다.

## CORS 에러 해결법

---

실제 배포전에 프론트 엔드 개발 서버에서 서버와 통신을 할때 포트가 달라 CORS 에러가 발생하는 경우가 있었는데 이때 프론트와 백엔드에서 해결할 수 있는 방법을 경험해 보았습니다.

일반적으로 백엔드 서버에서 클라이언트 도메인을 허용하는 CORS 헤더를 설정하여 해결할 수 있습니다만 개발단계에서 불가피할 경우 프론트 서버에서는 프록시를 통해 서버로 보내는 요청/응답을 중계하여 우회하기 때문에 브라우저 입장에서 동일출처로 간주하여 CORS에러가 발생하지 않습니다.
